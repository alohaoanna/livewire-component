window.$OANNA=window.$oanna={modal(_){return{name:_,constructor(B){this.name=B},show(){window.Livewire?.first().dispatch('modal-show',{'name':this.name})},close(){window.Livewire?.first().dispatch('modal-close',{'name':this.name})}}},toast(C,_b,_c=null,D='default',E='bottom'){window.Livewire?.first().dispatch('toast-show',{duration:C,slots:{text:_b,heading:_c},dataset:{variant:D,position:E}})}};console.log('oanna init');document.addEventListener('livewire:initialized',function(_a){window.Livewire?.on('modal-show',function(_A){var _B=_A.name,_C=document.querySelector(`dialog[data-modal=${_B}]`);!_C?console.warn(`No modal found for name [${_B}]`):a(_C)});window.Livewire?.on('modal-close',function(aA){var aB=aA.name,aC=document.querySelector(`dialog[data-modal=${aB}]`);if(!aC)console.warn(`No modal found for name [${aB}]`);else aC.hasAttribute('data-open')&&b(aC)})});window.Livewire?.directive('modal',function({el:aD,directive:aE,component:aF,cleanup:_d}){aD.addEventListener('click',function(aG){console.log(aD==aG.target&&aD.contains(aG.target));if(aD==aG.target&&aD.contains(aG.target)){var aH=aD.hasAttribute('data-open'),aI=aD.getAttribute('data-dismissible');console.log(aI=='true'&&aH);(aI=='true'&&aH)&&b(aD)}})});function a(aJ){aJ.showModal();setTimeout(function(){aJ.setAttribute('data-open','')},200)}function b(aK){var aL=getComputedStyle(aK),aM=parseFloat(aL.transitionDuration);isNaN(aM)?aM=200:aM=aM*1000;aK.removeAttribute('data-open');setTimeout(function(){aK.close()},aM)}var c;document.addEventListener('livewire:initialized',function(aN){window.Livewire?.on('toast-show',function(aQ){var aR=document.querySelector('[data-oanna-toastr]');if(aR.hasAttribute('data-open')){c&&window.clearTimeout(c);aR.removeAttribute('data-open');var _D=getComputedStyle(aR),aS=(parseFloat(_D.transitionDuration)*1000)??200;setTimeout(function(){d(aR,aQ)},(aS/1.5))}else d(aR,aQ)});window.Livewire?.on('toast-dismiss',function(){f(document.querySelector('[data-oanna-toastr]'))});var aO=document.querySelector('[data-oanna-toastr]');if(aO){var aP=aO.querySelector('[data-toastr-close]');aP?.addEventListener('click',function(aT){aO.hasAttribute('data-open')&&f(aO)})}});function d(aU,aV){var aW=aV.duration??3000,aX=aV.slots,_e=aV.dataset,F=aU.querySelector('h5.title');if(F&&aX['heading'])F.innerText=aX['heading'];else !aX['heading']&&(F.innerText='');var G=aU.querySelector('p.text');!aX['heading']?G.classList.add('main'):G.classList.remove('main');(G&&aX['text'])&&(G.innerText=aX['text']);aU.setAttribute('data-position',_e['position']??'bottom right');aU.setAttribute('data-variant',_e['variant']??'default');aU.setAttribute('data-duration',`${aW}`);A(aU,aW)}function A(aY,aZ){aY.showPopover();setTimeout(function(){aY.setAttribute('data-open','')},1);aZ>0&&(c=window.setTimeout(function(){f(aY)},aZ))}function f(bA){var bB=getComputedStyle(bA);bA.removeAttribute('data-open');c&&window.clearTimeout(c);setTimeout(function(){bA.hidePopover()},(parseFloat(bB.transitionDuration)*1000)??200)}window.Livewire?.directive('dropdown',function({el:bC,directive:bD,component:bE,cleanup:bF}){console.log(bC);var _E=bC.getAttribute('data-position'),[_f,_g]=_E.split(' '),H=10,I=bC.firstElementChild,J=bC.querySelector('[data-oanna-menu]'),K=I.getBoundingClientRect();g(J);var L=J.getBoundingClientRect();h(J);var M,n;if(_f.toLowerCase()=='top'||_f.toLowerCase()=='bottom'){if(_f.toLowerCase()=='top')M=K.top-L.height-H;else _f.toLowerCase()=='bottom'&&(M=K.bottom+H);if(_g.toLowerCase()=='start')n=K.left;else if(_g.toLowerCase()=='center')K.width>L.width?n=((K.width-L.width)/2)+K.left:n=K.left-((L.width-K.width)/2);else _g.toLowerCase()=='end'&&(n=K.right-L.width)}else if(_f.toLowerCase()=='left'||_f.toLowerCase()=='right'){if(_f.toLowerCase()=='left')n=K.left-L.width-H;else _f.toLowerCase()=='right'&&(n=K.right+H);if(_g.toLowerCase()=='start')M=K.top;else if(_g.toLowerCase()=='center')K.height>L.height?M=((K.height-L.height)/2)+K.top:M=K.top-((L.height-K.height)/2);else _g.toLowerCase()=='end'&&(M=K.bottom-L.height)}J.style.position='absolute';J.style.overflowY='auto';J.style.inset=(M+'px')+' auto auto '+(n+'px');I.addEventListener('click',function(bG){J.hasAttribute('data-open')?(bC.removeAttribute('data-active'),h(J)):(bC.setAttribute('data-active',''),g(J))})});window.Livewire?.directive('submenu',function({el:bH,directive:bI,component:bJ,cleanup:bK}){var bL=bH.querySelector('[data-oanna-menu]');bH.addEventListener('mouseover',function(bM){bH.setAttribute('data-active','');var bN=bH.getBoundingClientRect(),bP=bL.getBoundingClientRect().width;bL.style.position='absolute';bL.style.overflowY='auto';bL.style.inset=(bN.top+'px')+' auto auto '+((bN.left+bN.width)+'px');g(bL);var bO=i(bL);h(bL);!bO.right&&(bL.style.inset=(bN.top+'px')+' auto auto '+((bN.left-bP)+'px'));g(bL)});bH.addEventListener('mouseout',function(bQ){bH.removeAttribute('data-active');h(bL)})});document.addEventListener('livewire:initialized',function(bR){document.addEventListener('click',function(bS){for(const bU of document.querySelectorAll('[data-oanna-dropdown]')){var bT=bU.querySelector('[data-oanna-menu]');if(bS.target==bU||bU.contains(bS.target))continue;if(!bT.hasAttribute('data-oanna-menu-submenu'))bT.hasAttribute('data-open')&&h(bT)}})});function g(bV){bV.showPopover();bV.setAttribute('data-open','')}function h(bW){bW.hidePopover();bW.removeAttribute('data-open')}function i(bX){let bY=bX.getBoundingClientRect();let bZ=document.documentElement;return{top:bY.top>=0,bottom:bY.bottom<=(window.innerHeight||bZ.clientHeight),left:bY.left>=0,right:bY.right<=(window.innerWidth||bZ.clientWidth)}}window.Livewire?.directive('tooltip',function({el:cA,directive:cB,component:cC,cleanup:cD}){var cE=cA.getAttribute('data-position'),_F=10,_i=cA.querySelector('[data-oanna-tooltip-content]');if(!cA.querySelector('[data-oanna-tooltip-content]')){var _G=document.createElement('div');_G.setAttribute('popover','manual');_G.setAttribute('data-oanna-tooltip-content','');_G.setAttribute('wire:ignore.self','');_G.innerText=cA.getAttribute('data-oanna-tooltip');cA.appendChild(_G)}var _h=cA.getBoundingClientRect();j(_i);var _j=_i.getBoundingClientRect();k(_i);var _k,_l;if(cE=='top'){_k=(_h.top-_j.height)-_F;_l=((_h.width-_j.width)/2)+_h.left;_j.width>_h.width&&(_l=_h.left-((_j.width-_h.width)/2))}else if(cE=='bottom'){_k=_h.top+_F;_l=((_h.width-_j.width)/2)+_h.left;_j.width>_h.width&&(_l=_h.left-((_j.width-_h.width)/2))}else if(cE=='left'){_l=(_h.left-_j.width)-_F;_k=((_h.height-_j.height)/2)+_h.top;_j.width>_h.width&&(_k=_h.top-((_j.height-_h.height)/2))}else if(cE=='right'){_l=_h.left+_F;_k=((_h.height-_j.height)/2)+_h.top;_j.width>_h.width&&(_k=_h.top-((_j.height-_h.height)/2))}_i.style.position='absolute';_i.style.overflowY='auto';_i.style.inset=(_k+'px')+' auto auto '+(_l+'px');cA.addEventListener('mouseover',function(cF){j(cA.querySelector('[data-oanna-tooltip-content]'))});cA.addEventListener('mouseout',function(cG){k(cA.querySelector('[data-oanna-tooltip-content]'))})});function j(cH){cH.showPopover();setTimeout(function(){cH.setAttribute('data-open','')},1)}function k(cI){var cJ=getComputedStyle(cI);cI.removeAttribute('data-open');setTimeout(function(){cI.hidePopover()},parseInt(cJ.transitionDuration)??200)}window.Livewire?.directive('select',function({el:cK,directive:cL,component:cM,cleanup:cN}){var cO=10,cP=cK.querySelector('[data-oanna-select-button]');cP.addEventListener('click',function(cR){var cS=cR.target.closest('[data-oanna-select-button]'),cT=cS.getBoundingClientRect(),cU=cK.querySelector('[data-oanna-select-options]');if(cU.hasAttribute('data-open'))m(cU);else{cU.showPopover();var cV=i(cU),cW=cU.getBoundingClientRect();cU.hidePopover();cU.style.width=cT.width+'px';!cV.bottom?cU.style.inset=((cT.top-cW.height-cO)+'px')+' auto auto '+(cT.left+'px'):cU.style.inset=((cT.top+cT.height+cO)+'px')+' auto auto '+(cT.left+'px');l(cU)}});var cQ=cK.querySelector('[data-oanna-select-options]');for(const cX of cQ.querySelectorAll('[data-oanna-select-option]'))cX.addEventListener('click',function(cY){console.log(cX);var cZ=cM.$wire.$get(cL.expression),dC=cK.querySelector('[data-oanna-select-button]');cZ=JSON.parse(JSON.stringify(cZ));console.log(cZ);var dA=cX.innerText;console.log(dA);cX.hasAttribute('value')&&(dA=cX.getAttribute('value'));console.log(dA);if(cZ.includes(dA)){var dB=cZ.indexOf(dA);cZ.splice(dB,1)}else cZ.push(dA);console.log(cZ);cM.$wire.$set(cL.expression,cZ);if(cZ.length>1)dC.innerText=cZ.length+' '+dC.getAttribute('data-selected-suffix');else if(cZ.length==1){var dD=cZ.at(0);dD=cQ.querySelector(`[data-oanna-select-option][value="${dD}"]`);dC.innerText=dD.innerText}else dC.innerText=dC.getAttribute('data-placeholder')});cN(()=>{})});document.addEventListener('livewire:initialized',function(dE){document.addEventListener('click',function(dF){for(const dH of document.querySelectorAll('[wire\\:select]')){var dG=dH.querySelector('[data-oanna-select-options]');if(dG.hasAttribute('data-open'))(dF.target!=dG&&!dG.contains(dF.target))&&m(dG)}})});function l(dI){dI.showPopover();setTimeout(function(){dI.setAttribute('data-open','')},1)}function m(dJ){dJ.hidePopover();dJ.removeAttribute('data-open')}window.Livewire?.directive('wysiwyg',function({el:dK,directive:dL,component:dM,cleanup:dN}){var dO=dK.getAttribute('data-core'),dP;if(dO=='ckeditor'){const{ClassicEditor:dR,Alignment:dS,Autosave:dT,Bold:dU,Essentials:dV,Heading:dW,ImageEditing:dX,ImageUtils:dY,Indent:dZ,IndentBlock:eA,Italic:_K,List:_L,ListProperties:_m,Paragraph:N,PlainTableOutput:o,Strikethrough:p,Subscript:q,Superscript:r,Table:s,TableCaption:t,TableCellProperties:u,TableColumnResize:v,TableLayout:w,TableProperties:x,TableToolbar:y,TodoList:z,Underline:eB}=window.CKEDITOR,dQ=dM.$wire.get(dL.expression),_H=dK.getAttribute('data-license-key'),_I={toolbar:{items:['undo','redo','|','heading','|','bold','italic','underline','strikethrough','subscript','superscript','|','insertTable','insertTableLayout','|','alignment','|','bulletedList','numberedList','todoList','outdent','indent'],shouldNotGroupWhenFull:!0},plugins:[dS,dT,dU,dV,dW,dX,dY,dZ,eA,_K,_L,_m,N,o,p,q,r,s,t,u,v,w,x,y,z,eB],heading:{options:[{model:'paragraph',title:'Paragraph',class:'ck-heading_paragraph'},{model:'heading1',view:'h1',title:'Heading 1',class:'ck-heading_heading1'},{model:'heading2',view:'h2',title:'Heading 2',class:'ck-heading_heading2'},{model:'heading3',view:'h3',title:'Heading 3',class:'ck-heading_heading3'},{model:'heading4',view:'h4',title:'Heading 4',class:'ck-heading_heading4'},{model:'heading5',view:'h5',title:'Heading 5',class:'ck-heading_heading5'},{model:'heading6',view:'h6',title:'Heading 6',class:'ck-heading_heading6'}]},initialData:dQ,licenseKey:_H,list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:dK.getAttribute('placeholder'),table:{contentToolbar:['tableColumn','tableRow','mergeTableCells','tableProperties','tableCellProperties']},autosave:{waitingTiming:5000,save:eC=>dM.$wire.set(dL.expression,eC.getData())}};var dP;dR.create(dK,_I).then(e=>{console.log('editor loaded');dP=e}).catch(eD=>console.error(eD))}else{var _J=[[{header:[1,2,3,!1]}],['bold','italic'],[{list:'ordered'},{list:'bullet'}]];dP=new window.Quill(dK, {theme:'snow',modules:{toolbar:_J}});dP.root.innerHTML=dM.$wire.get(dL.expression);window.Livewire?.on('wysiwyg-prop-updated',function(eE){dP.root.innerHTML=eE.value});dP.on('text-change',function(){dM.$wire.set(dL.expression,dP.root.innerHTML)})}window.Livewire?.on('wysiwyg-prop-updated',function(eF){dO=='ckeditor'?dP.setData(eF.value):dP.disable()});dN(()=>{dO?dP.destroy().catch(eG=>console.error(eG)):dP.disable()})});
