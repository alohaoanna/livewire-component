window.$OANNA=window.$oanna={modal(_){return{name:_,constructor(B){this.name=B},show(){window.Livewire?.first().dispatch('modal-show',{'name':this.name})},close(){window.Livewire?.first().dispatch('modal-close',{'name':this.name})}}},toast(C,_b,_c=null,D='default',E='bottom'){window.Livewire?.first().dispatch('toast-show',{duration:C,slots:{text:_b,heading:_c},dataset:{variant:D,position:E}})}};console.log('oanna init');document.addEventListener('livewire:initialized',function(_a){window.Livewire?.on('modal-show',function(_A){var _B=_A.name,_C=document.querySelector(`dialog[data-modal=${_B}]`);!_C?console.warn(`No modal found for name [${_B}]`):a(_C)});window.Livewire?.on('modal-close',function(aA){var aB=aA.name,aC=document.querySelector(`dialog[data-modal=${aB}]`);if(!aC)console.warn(`No modal found for name [${aB}]`);else aC.hasAttribute('data-open')&&b(aC)})});window.Livewire?.directive('modal',function({el:aD,directive:aE,component:aF,cleanup:_d}){aD.addEventListener('click',function(aG){if(aD==aG.target&&aD.contains(aG.target)){var aH=aD.hasAttribute('data-open'),aI=aD.getAttribute('data-dismissible');(aI=='true'&&aH)&&b(aD)}})});function a(aJ){aJ.showModal();setTimeout(function(){aJ.setAttribute('data-open','')},200)}function b(aK){var aL=getComputedStyle(aK),aM=parseFloat(aL.transitionDuration);isNaN(aM)?aM=200:aM=aM*1000;aK.removeAttribute('data-open');setTimeout(function(){aK.close()},aM)}var c;document.addEventListener('livewire:initialized',function(aN){window.Livewire?.on('toast-show',function(aQ){var aR=document.querySelector('[data-oanna-toastr]');if(aR.hasAttribute('data-open')){c&&window.clearTimeout(c);aR.removeAttribute('data-open');var _D=getComputedStyle(aR),aS=(parseFloat(_D.transitionDuration)*1000)??200;setTimeout(function(){d(aR,aQ)},(aS/1.5))}else d(aR,aQ)});window.Livewire?.on('toast-dismiss',function(){f(document.querySelector('[data-oanna-toastr]'))});var aO=document.querySelector('[data-oanna-toastr]');if(aO){var aP=aO.querySelector('[data-toastr-close]');aP?.addEventListener('click',function(aT){aO.hasAttribute('data-open')&&f(aO)})}});function d(aU,aV){var aW=aV.duration??3000,aX=aV.slots,_e=aV.dataset,F=aU.querySelector('h5.title');if(F&&aX['heading'])F.innerText=aX['heading'];else !aX['heading']&&(F.innerText='');var G=aU.querySelector('p.text');!aX['heading']?G.classList.add('main'):G.classList.remove('main');(G&&aX['text'])&&(G.innerText=aX['text']);aU.setAttribute('data-position',_e['position']??'bottom right');aU.setAttribute('data-variant',_e['variant']??'default');aU.setAttribute('data-duration',`${aW}`);A(aU,aW)}function A(aY,aZ){aY.showPopover();setTimeout(function(){aY.setAttribute('data-open','')},1);aZ>0&&(c=window.setTimeout(function(){f(aY)},aZ))}function f(bA){var bB=getComputedStyle(bA);bA.removeAttribute('data-open');c&&window.clearTimeout(c);setTimeout(function(){bA.hidePopover()},(parseFloat(bB.transitionDuration)*1000)??200)}window.Livewire?.directive('dropdown',function({el:bC,directive:bD,component:bE,cleanup:bF}){var _E=bC.getAttribute('data-position'),[_f,_g]=_E.split(' '),H=10,I=bC.firstElementChild,J=bC.querySelector('[data-oanna-menu]');I.addEventListener('click',function(bG){if(J.hasAttribute('data-open')){bC.removeAttribute('data-active');h(J)}else{bC.setAttribute('data-active','');var bH=I.getBoundingClientRect(),_F=bH.top+window.scrollY;J.showPopover();var bI=J.getBoundingClientRect();J.hidePopover();var bJ,bK;switch(_f.toLowerCase()) {case 'top':case 'bottom':switch(_f.toLowerCase()) {case 'top':bJ=_F-bI.height-(H*2);break;case 'bottom':bJ=_F+bH.height+H;break}switch(_g.toLowerCase()) {case 'start':bK=bH.left;break;case 'center':bH.width>bI.width?bK=((bH.width-bI.width)/2)+bH.left:bK=bH.left-((bI.width-bH.width)/2);break;case 'end':bK=bH.left+bH.width-bI.width;break;default:console.warn('Please provide a right align from the given ones: [start, center, end]');break}break;case 'left':case 'right':switch(_f.toLowerCase()) {case 'left':bK=bH.left-bI.width-(H*2);break;case 'right':bK=bH.left+bH.width+H;break}switch(_g.toLowerCase()) {case 'start':bJ=_F;break;case 'center':bH.height>bI.height?bJ=((bH.height-bI.height)/2)+_F:bJ=_F-((bI.height-bH.height)/2);break;case 'end':bJ=bH.bottom-bI.height;break;default:console.warn('Please provide a right align from the given ones: [start, center, end]');break}break;default:console.warn('Please provide a right position from the given ones: [top, bottom, left, right]');break}J.style.position='absolute';J.style.overflowY='auto';J.style.inset=(bJ+'px')+' auto auto '+(bK+'px');g(J)}})});window.Livewire?.directive('submenu',function({el:bL,directive:bM,component:bN,cleanup:bO}){var bP=10,bQ=bL.querySelector('[data-oanna-menu]');bL.addEventListener('mouseenter',function(bR){bL.setAttribute('data-active','');var bS=bL.getBoundingClientRect(),bW=bQ.getBoundingClientRect();var bT=bS.top+window.scrollY,bU=bS.left+bS.width;bQ.style.position='absolute';bQ.style.overflowY='auto';bQ.style.inset=(bT+'px')+' auto auto '+(bU+'px');g(bQ);var bV=i(bQ);h(bQ);!bV.right&&(bU=bS.left-bW.width);!bV.bottom&&(bT=window.innerHeight+window.scrollY-bP-bW.height);console.log(bV);bQ.style.inset=(bT+'px')+' auto auto '+(bU+'px');g(bQ)});bL.addEventListener('mouseleave',function(bX){bL.removeAttribute('data-active');h(bQ)})});function g(bY){bY.showPopover();setTimeout(function(){bY.setAttribute('data-open','')},1)}function h(bZ){bZ.hidePopover();bZ.removeAttribute('data-open')}function i(cA){let cB=cA.getBoundingClientRect();let cC=document.documentElement;return{top:cB.top>=0,bottom:cB.bottom<=(window.innerHeight||cC.clientHeight),left:cB.left>=0,right:cB.right<=(window.innerWidth||cC.clientWidth)}}window.Livewire?.directive('tooltip',function({el:cD,directive:cE,component:cF,cleanup:cG}){var cH=cD.getAttribute('data-position'),cI=10;if(!cD.querySelector('[data-oanna-tooltip-content]')){var _G=document.createElement('div');_G.setAttribute('popover','manual');_G.setAttribute('data-oanna-tooltip-content','');_G.setAttribute('wire:ignore.self','');_G.innerText=cD.getAttribute('data-oanna-tooltip');cD.appendChild(_G)}var _h=cD.firstElementChild;_h.addEventListener('mouseenter',function(cJ){j(cD.querySelector('[data-oanna-tooltip-content]'),_h.getBoundingClientRect(),cH,cI)});_h.addEventListener('mouseleave',function(cK){k(cD.querySelector('[data-oanna-tooltip-content]'))})});function j(cL,cM,cN,cO){cL.showPopover();var cP=cL.getBoundingClientRect(),cQ=cM.top+window.scrollY;var cR,_H;switch(cN.toLowerCase()) {case 'top':cR=cQ-cP.height-cO;_H=((cM.width-cP.width)/2)+cM.left;cP.width>cM.width&&(_H=cM.left-((cP.width-cM.width)/2));break;case 'bottom':cR=cQ+cP.height+cO;_H=((cM.width-cP.width)/2)+cM.left;cP.width>cM.width&&(_H=cM.left-((cP.width-cM.width)/2));break;case 'left':_H=cM.left-cP.width-cO;cR=((cM.height-cP.height)/2)+cQ;cP.height>cM.height&&(cR=cQ-((cP.height-cM.height)/2));break;case 'right':_H=cM.left+cM.width+cO;cR=((cM.height-cP.height)/2)+cQ;cP.height>cM.height&&(cR=cQ-((cP.height-cM.height)/2));break;default:console.warn('Please provide a right position from the given ones: [top, bottom, left, right]');break}cL.style.position='absolute';cL.style.overflowY='auto';cL.style.inset=(cR+'px')+' auto auto '+(_H+'px');setTimeout(function(){cL.setAttribute('data-open','')},1)}function k(cS){var cT=getComputedStyle(cS);cS.removeAttribute('data-open');setTimeout(function(){cS.hidePopover()},parseInt(cT.transitionDuration)??200)}window.Livewire?.directive('select',function({el:cU,directive:cV,component:cW,cleanup:cX}){var cY=10,cZ=cU.querySelector('[data-oanna-select-button]');cZ.addEventListener('click',function(dC){var dD=dC.target.closest('[data-oanna-select-button]');n(cU.querySelector('[data-oanna-select-options]'),dD.getBoundingClientRect(),cY)});if(cU.hasAttribute('data-oanna-select-searchable')){var dB=cU.querySelector('[data-oanna-select-search-input]');dB.addEventListener('keyup',function(dE){var dF=cU.querySelector('[data-oanna-select-options]');setTimeout(function(){for(const dG of dF.querySelectorAll('[data-oanna-select-option]'))!dG.innerText.toLowerCase().includes(dB.value.toLowerCase())?dG.setAttribute('data-hidden',''):dG.removeAttribute('data-hidden');n(dF,cZ.getBoundingClientRect(),cY)},250)})}var dA=cU.querySelector('[data-oanna-select-options]');for(const dH of dA.querySelectorAll('[data-oanna-select-option]'))dH.addEventListener('click',function(dI){var dJ=dH.getAttribute('value')??dH.innerText;cU.hasAttribute('data-oanna-select-multiple')?l(cW.$wire,cV.expression,dJ,dH,cZ,dA):m(cW.$wire,cV.expression,dJ,dH,cZ);o(dA)});cX(()=>{})});function l(dK,dL,dM,dN,dO,dP){var dQ=dK.$get(dL);dQ=JSON.parse(JSON.stringify(dQ));if(dQ.includes(dM)){var dR=dQ.indexOf(dM);dQ.splice(dR,1)}else dQ.push(dM);dK.$set(dL,dQ);if(dQ.length>1)dO.innerText=dQ.length+' '+dO.getAttribute('data-selected-suffix');else if(dQ.length==1){var _i=dQ.at(0);_i=dP.querySelector(`[data-oanna-select-option][value="${_i}"]`);dO.innerText=_i.innerText}else dO.innerText=dO.getAttribute('data-placeholder')}function m(dS,dT,dU,dV,dW){dS.$set(dT,dU);dW.innerText=dV.innerText}function n(dX,dY,dZ){dX.showPopover();var eA=dY.top+window.scrollY,eB=dX.getBoundingClientRect();dX.style.inset=((eA+dY.height+dZ)+'px')+' auto auto '+(dY.left+'px');var eC=i(dX);dX.style.width=dY.width+'px';dX.style.position='absolute';dX.style.overflowY='auto';!eC.bottom?dX.style.inset=((eA-eB.height-dZ)+'px')+' auto auto '+(dY.left+'px'):dX.style.inset=((eA+dY.height+dZ)+'px')+' auto auto '+(dY.left+'px');setTimeout(function(){dX.setAttribute('data-open','')},1)}function o(eD){eD.hidePopover();eD.removeAttribute('data-open')}window.Livewire?.directive('wysiwyg',function({el:eE,directive:eF,component:eG,cleanup:eH}){var eI=eE.getAttribute('data-core'),eJ;if(eI=='ckeditor'){const{ClassicEditor:eM,Alignment:eN,Autosave:eO,Bold:eP,Essentials:eQ,Heading:eR,ImageEditing:eS,ImageUtils:eT,Indent:eU,IndentBlock:_J,Italic:K,List:L,ListProperties:M,Paragraph:N,PlainTableOutput:O,Strikethrough:P,Subscript:Q,Superscript:R,Table:S,TableCaption:T,TableCellProperties:U,TableColumnResize:v,TableLayout:w,TableProperties:x,TableToolbar:y,TodoList:z,Underline:eV}=window.CKEDITOR,eK=eG.$wire.get(eF.expression),eL=eE.getAttribute('data-license-key'),_I={toolbar:{items:['undo','redo','|','heading','|','bold','italic','underline','strikethrough','subscript','superscript','|','insertTable','insertTableLayout','|','alignment','|','bulletedList','numberedList','todoList','outdent','indent'],shouldNotGroupWhenFull:!0},plugins:[eN,eO,eP,eQ,eR,eS,eT,eU,_J,K,L,M,N,O,P,Q,R,S,T,U,v,w,x,y,z,eV],heading:{options:[{model:'paragraph',title:'Paragraph',class:'ck-heading_paragraph'},{model:'heading1',view:'h1',title:'Heading 1',class:'ck-heading_heading1'},{model:'heading2',view:'h2',title:'Heading 2',class:'ck-heading_heading2'},{model:'heading3',view:'h3',title:'Heading 3',class:'ck-heading_heading3'},{model:'heading4',view:'h4',title:'Heading 4',class:'ck-heading_heading4'},{model:'heading5',view:'h5',title:'Heading 5',class:'ck-heading_heading5'},{model:'heading6',view:'h6',title:'Heading 6',class:'ck-heading_heading6'}]},initialData:eK,licenseKey:eL,list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:eE.getAttribute('placeholder'),table:{contentToolbar:['tableColumn','tableRow','mergeTableCells','tableProperties','tableCellProperties']},autosave:{waitingTiming:5000,save:eW=>eG.$wire.set(eF.expression,eW.getData())}};var eJ;eM.create(eE,_I).then(e=>eJ=e).catch(eX=>console.error(eX))}else{var _j=[[{header:[1,2,3,!1]}],['bold','italic'],[{list:'ordered'},{list:'bullet'}]];eJ=new window.Quill(eE, {theme:'snow',modules:{toolbar:_j}});eJ.root.innerHTML=eG.$wire.get(eF.expression);window.Livewire?.on('wysiwyg-prop-updated',function(eY){eJ.root.innerHTML=eY.value});eJ.on('text-change',function(){eG.$wire.set(eF.expression,eJ.root.innerHTML)})}window.Livewire?.on('wysiwyg-prop-updated',function(eZ){eI=='ckeditor'?eJ.setData(eZ.value):eJ.disable()});eH(()=>{eI?eJ.destroy().catch(fA=>console.error(fA)):eJ.disable()})});window.Livewire?.directive('date-picker',function({el:fB,directive:fC,component:fD,cleanup:fE}){var fF=10,fG=fB.querySelector('[data-input-container]');fG.addEventListener('click',function(fH){p(fB.querySelector('[data-oanna-date-picker-calendar]'),fG.getBoundingClientRect(),fF)});fE(()=>{})});function p(fI,fJ,fK){fI.showPopover();var fL=fI.getBoundingClientRect(),fM=fJ.top+window.scrollY;fI.style.inset=((fM+fJ.height+fK)+'px')+' auto auto '+(fJ.left+'px');var fN=i(fI);fI.style.minWidth=fJ.width+'px';fI.style.width='auto';fI.style.position='absolute';fI.style.overflowY='auto';!fN.bottom&&(fI.style.inset=(((fM)-fL.height-fK)+'px')+' auto auto '+(fJ.left+'px'));setTimeout(function(){fI.setAttribute('data-open','')},1)}function q(fO){fO.hidePopover();fO.removeAttribute('data-open')}window.Livewire?.directive('context',function({el:fP,directive:fQ,component:fR,cleanup:fS}){var fT=fP.firstElementChild;fT.addEventListener('contextmenu',function(fU){if(!fT.hasAttribute('data-disabled')){var fV=fP.querySelector('[data-oanna-menu]');if(!fV){console.error('No <oanna:menu> found in the <oanna:context> component');return}fU.preventDefault();const[fW,fX]=fP.getAttribute('data-position').split(' ');r(fV,fW,fX,fU)}});fS(()=>{})});function r(fY,fZ,gA,gB){fY.showPopover();var gC=fY.getBoundingClientRect(),gD=gB.pageY;var gE,gF;switch(fZ.toLowerCase()) {case 'top':gE=gD-gC.height;break;case 'bottom':gE=gD;break}switch(gA.toLowerCase()) {case 'start':gF=gB.pageX;break;case 'center':gF=gB.pageX-(gC.width/2);break;case 'end':gF=gB.pageX-gC.width;break}fY.style.position='absolute';fY.style.overflowY='auto';fY.style.inset=(gE+'px')+' auto auto '+(gF+'px');var gG=i(fY);!gG.top&&(gE=(gD));!gG.bottom&&(gE=(gD)-gC.height);!gG.right&&(gF=gB.pageX-gC.width);fY.style.position='absolute';fY.style.overflowY='auto';fY.style.inset=(gE+'px')+' auto auto '+(gF+'px');fY.setAttribute('data-open','')}function s(gH){gH.hidePopover();gH.removeAttribute('data-open')}window.Livewire?.directive('table',function({el:gI,directive:gJ,component:gK,cleanup:gL}){var gM=gK.$wire.$get('oannaSortBy');for(const gN of gI.querySelectorAll('[data-oanna-table-column]'))if(gN.hasAttribute('data-sortable')){gM===gN.getAttribute('data-sortable')&&t(gN,gK);gN.addEventListener('click',function(gO){var gP=gK.$wire.$get('oannaSortBy');gK.$wire.$set('oannaSortBy',gN.getAttribute('data-sortable'));gP===gN.getAttribute('data-sortable')?gK.$wire.$call('oannaDirectionToggle'):gK.$wire.$set('oannaDirection','asc');u(gI);t(gN,gK)})}gL(()=>{})});function t(gQ,gR){gQ.setAttribute('data-active','');gQ.setAttribute('data-direction',gR.$wire.$get('oannaDirection'))}function u(gS){for(const gT of gS.querySelectorAll('[data-oanna-table-column]')){gT.removeAttribute('data-active');gT.removeAttribute('data-direction')}}document.addEventListener('livewire:initialized',function(gU){document.addEventListener('click',function(gV){for(const gZ of document.querySelectorAll('[wire\\:dropdown]')){var gW=gZ.querySelector('[data-oanna-menu]');if(gV.target!=gZ&&!gZ.contains(gV.target))(!gW.hasAttribute('data-oanna-menu-submenu')&&gW.hasAttribute('data-open'))&&h(gW)}for(const hA of document.querySelectorAll('[wire\\:select]')){var gX=hA.querySelector('[data-oanna-select-options]');if(gX.hasAttribute('data-open'))(gV.target!=gX&&!gX.contains(gV.target))&&o(gX)}for(const hB of document.querySelectorAll('[wire\\:date-picker]')){var gY=hB.querySelector('[data-oanna-date-picker-calendar]');if(gY.hasAttribute('data-open'))(gV.target!=gY&&!gY.contains(gV.target))&&q(gY)}document.querySelectorAll('[wire\\:context]').forEach(hC=>{var hD=hC.querySelector('[data-oanna-menu]');if(hD.hasAttribute('data-open'))(gV.target!=hD&&!hD.contains(gV.target))&&s(hD)})})});
