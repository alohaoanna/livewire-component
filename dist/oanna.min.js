window.$OANNA=window.$oanna={modal(_){return{name:_,constructor(B){this.name=B},show(){window.Livewire?.first().dispatch('modal-show',{'name':this.name})},close(){window.Livewire?.first().dispatch('modal-close',{'name':this.name})}}},toast(C,_b,_c=null,D='default',E='bottom'){window.Livewire?.first().dispatch('toast-show',{duration:C,slots:{text:_b,heading:_c},dataset:{variant:D,position:E}})}};console.log('oanna init');document.addEventListener('livewire:initialized',function(_a){window.Livewire?.on('modal-show',function(_A){var _B=_A.name,_C=document.querySelector(`dialog[data-modal=${_B}]`);!_C?console.warn(`No modal found for name [${_B}]`):a(_C)});window.Livewire?.on('modal-close',function(aA){var aB=aA.name,aC=document.querySelector(`dialog[data-modal=${aB}]`);if(!aC)console.warn(`No modal found for name [${aB}]`);else aC.hasAttribute('data-open')&&b(aC)})});window.Livewire?.directive('modal',function({el:aD,directive:aE,component:aF,cleanup:_d}){aD.addEventListener('click',function(aG){if(aD==aG.target&&aD.contains(aG.target)){var aH=aD.hasAttribute('data-open'),aI=aD.getAttribute('data-dismissible');(aI=='true'&&aH)&&b(aD)}})});function a(aJ){aJ.showModal();setTimeout(function(){aJ.setAttribute('data-open','')},200)}function b(aK){var aL=getComputedStyle(aK),aM=parseFloat(aL.transitionDuration);isNaN(aM)?aM=200:aM=aM*1000;aK.removeAttribute('data-open');setTimeout(function(){aK.close()},aM)}var c;document.addEventListener('livewire:initialized',function(aN){window.Livewire?.on('toast-show',function(aQ){var aR=document.querySelector('[data-oanna-toastr]');if(aR.hasAttribute('data-open')){c&&window.clearTimeout(c);aR.removeAttribute('data-open');var _D=getComputedStyle(aR),aS=(parseFloat(_D.transitionDuration)*1000)??200;setTimeout(function(){d(aR,aQ)},(aS/1.5))}else d(aR,aQ)});window.Livewire?.on('toast-dismiss',function(){f(document.querySelector('[data-oanna-toastr]'))});var aO=document.querySelector('[data-oanna-toastr]');if(aO){var aP=aO.querySelector('[data-toastr-close]');aP?.addEventListener('click',function(aT){aO.hasAttribute('data-open')&&f(aO)})}});function d(aU,aV){var aW=aV.duration??3000,aX=aV.slots,_e=aV.dataset,F=aU.querySelector('h5.title');if(F&&aX['heading'])F.innerText=aX['heading'];else !aX['heading']&&(F.innerText='');var G=aU.querySelector('p.text');!aX['heading']?G.classList.add('main'):G.classList.remove('main');(G&&aX['text'])&&(G.innerText=aX['text']);aU.setAttribute('data-position',_e['position']??'bottom right');aU.setAttribute('data-variant',_e['variant']??'default');aU.setAttribute('data-duration',`${aW}`);A(aU,aW)}function A(aY,aZ){aY.showPopover();setTimeout(function(){aY.setAttribute('data-open','')},1);aZ>0&&(c=window.setTimeout(function(){f(aY)},aZ))}function f(bA){var bB=getComputedStyle(bA);bA.removeAttribute('data-open');c&&window.clearTimeout(c);setTimeout(function(){bA.hidePopover()},(parseFloat(bB.transitionDuration)*1000)??200)}window.Livewire?.directive('dropdown',function({el:bC,directive:bD,component:bE,cleanup:bF}){var _E=bC.getAttribute('data-position'),[_f,_g]=_E.split(' '),H=10,I=bC.firstElementChild,J=bC.querySelector('[data-oanna-menu]');I.addEventListener('click',function(bG){if(J.hasAttribute('data-open')){bC.removeAttribute('data-active');i(J)}else{bC.setAttribute('data-active','');var bH=I.getBoundingClientRect();g(J,bH,H,_f,_g)}})});window.Livewire?.directive('submenu',function({el:bI,directive:bJ,component:bK,cleanup:bL}){var bM=10,_F=bI.querySelector('[data-oanna-menu]');bI.addEventListener('mouseenter',function(bN){bI.setAttribute('data-active','');h(_F,bI.getBoundingClientRect(),bM)});bI.addEventListener('mouseleave',function(bO){bI.removeAttribute('data-active');i(_F)})});function g(bP,bQ,bR,bS,bT){bP.showPopover();var bU=bP.getBoundingClientRect(),_G=bQ.top+window.scrollY;var _h,_i;switch(bS.toLowerCase()) {case 'top':_h=_G-bU.height-bR;break;case 'bottom':_h=_G+bQ.height+bR;break;default:console.warn('Please provide a right position from the given ones: [top, bottom]');break}switch(bT.toLowerCase()) {case 'start':_i=bQ.left;break;case 'center':bQ.width>bU.width?_i=((bQ.width-bU.width)/2)+bQ.left:_i=bQ.left-((bU.width-bQ.width)/2);break;case 'end':_i=bQ.left-(bQ.width-bU.width);break;default:console.warn('Please provide a right align from the given ones: [start, center, end]');break}bP.style.position='absolute';bP.style.overflowY='auto';bP.style.inset=(_h+'px')+' auto auto '+(_i+'px');setTimeout(function(){bP.setAttribute('data-open','')},1)}function h(bV,bW,bX){bV.showPopover();var bY=bV.getBoundingClientRect();var bZ=bW.top+window.scrollY,cA=bW.left+bW.width;bV.style.position='absolute';bV.style.overflowY='auto';bV.style.inset=(bZ+'px')+' auto auto '+(cA+'px');var cB=j(bV);!cB.right&&(cA=bW.left-bY.width);!cB.bottom&&(bZ=window.innerHeight+window.scrollY-bX-bY.height);console.log(cB);bV.style.inset=(bZ+'px')+' auto auto '+(cA+'px');setTimeout(function(){bV.setAttribute('data-open','')},1)}function i(cC){cC.hidePopover();cC.removeAttribute('data-open')}function j(cD){let cE=cD.getBoundingClientRect();let cF=document.documentElement;return{top:cE.top>=0,bottom:cE.bottom<=(window.innerHeight||cF.clientHeight),left:cE.left>=0,right:cE.right<=(window.innerWidth||cF.clientWidth)}}window.Livewire?.directive('tooltip',function({el:cG,directive:cH,component:cI,cleanup:cJ}){var cK=cG.getAttribute('data-position'),cL=10;if(!cG.querySelector('[data-oanna-tooltip-content]')){var cM=document.createElement('div');cM.setAttribute('popover','manual');cM.setAttribute('data-oanna-tooltip-content','');cM.setAttribute('wire:ignore.self','');cM.innerText=cG.getAttribute('data-oanna-tooltip');cG.appendChild(cM)}var _H=cG.firstElementChild;_H.addEventListener('mouseenter',function(cN){k(cG.querySelector('[data-oanna-tooltip-content]'),_H.getBoundingClientRect(),cK,cL)});_H.addEventListener('mouseleave',function(cO){l(cG.querySelector('[data-oanna-tooltip-content]'))})});function k(cP,cQ,cR,cS){cP.showPopover();var cT=cP.getBoundingClientRect(),cU=cQ.top+window.scrollY;var cV,cW;switch(cR.toLowerCase()) {case 'top':cV=cU-cT.height-cS;cW=((cQ.width-cT.width)/2)+cQ.left;cT.width>cQ.width&&(cW=cQ.left-((cT.width-cQ.width)/2));break;case 'bottom':cV=cU+cT.height+cS;cW=((cQ.width-cT.width)/2)+cQ.left;cT.width>cQ.width&&(cW=cQ.left-((cT.width-cQ.width)/2));break;case 'left':cW=cQ.left-cT.width-cS;cV=((cQ.height-cT.height)/2)+cU;cT.height>cQ.height&&(cV=cU-((cT.height-cQ.height)/2));break;case 'right':cW=cQ.left+cQ.width+cS;cV=((cQ.height-cT.height)/2)+cU;cT.height>cQ.height&&(cV=cU-((cT.height-cQ.height)/2));break;default:console.warn('Please provide a right position from the given ones: [top, bottom, left, right]');break}cP.style.position='absolute';cP.style.overflowY='auto';cP.style.inset=(cV+'px')+' auto auto '+(cW+'px');setTimeout(function(){cP.setAttribute('data-open','')},1)}function l(cX){var cY=getComputedStyle(cX);cX.removeAttribute('data-open');setTimeout(function(){cX.hidePopover()},parseInt(cY.transitionDuration)??200)}window.Livewire?.directive('select',function({el:cZ,directive:dA,component:dB,cleanup:dC}){var dD=10,dE=cZ.querySelector('[data-oanna-select-button]');dE.addEventListener('click',function(dH){var dI=dH.target.closest('[data-oanna-select-button]');o(cZ.querySelector('[data-oanna-select-options]'),dI.getBoundingClientRect(),dD)});if(cZ.hasAttribute('data-oanna-select-searchable')){var dG=cZ.querySelector('[data-oanna-select-search-input]');dG.addEventListener('keyup',function(dJ){var dK=cZ.querySelector('[data-oanna-select-options]');setTimeout(function(){for(const dL of dK.querySelectorAll('[data-oanna-select-option]'))!dL.innerText.toLowerCase().includes(dG.value.toLowerCase())?dL.setAttribute('data-hidden',''):dL.removeAttribute('data-hidden');o(dK,dE.getBoundingClientRect(),dD)},250)})}var dF=cZ.querySelector('[data-oanna-select-options]');for(const dM of dF.querySelectorAll('[data-oanna-select-option]'))dM.addEventListener('click',function(dN){var dO=dM.getAttribute('value')??dM.innerText;cZ.hasAttribute('data-oanna-select-multiple')?m(dB.$wire,dA.expression,dO,dM,dE,dF):n(dB.$wire,dA.expression,dO,dM,dE);p(dF)});dC(()=>{})});function m(dP,dQ,dR,dS,dT,dU){var dV=dP.$get(dQ);dV=JSON.parse(JSON.stringify(dV));if(dV.includes(dR)){var dW=dV.indexOf(dR);dV.splice(dW,1)}else dV.push(dR);dP.$set(dQ,dV);if(dV.length>1)dT.innerText=dV.length+' '+dT.getAttribute('data-selected-suffix');else if(dV.length==1){var _I=dV.at(0);_I=dU.querySelector(`[data-oanna-select-option][value="${_I}"]`);dT.innerText=_I.innerText}else dT.innerText=dT.getAttribute('data-placeholder')}function n(dX,dY,dZ,eA,eB){dX.$set(dY,dZ);eB.innerText=eA.innerText}function o(eC,eD,eE){eC.showPopover();var eF=eD.top+window.scrollY,eG=eC.getBoundingClientRect();eC.style.inset=((eF+eD.height+eE)+'px')+' auto auto '+(eD.left+'px');var eH=j(eC);eC.style.width=eD.width+'px';eC.style.position='absolute';eC.style.overflowY='auto';!eH.bottom?eC.style.inset=((eF-eG.height-eE)+'px')+' auto auto '+(eD.left+'px'):eC.style.inset=((eF+eD.height+eE)+'px')+' auto auto '+(eD.left+'px');setTimeout(function(){eC.setAttribute('data-open','')},1)}function p(eI){eI.hidePopover();eI.removeAttribute('data-open')}window.Livewire?.directive('wysiwyg',function({el:eJ,directive:eK,component:eL,cleanup:eM}){var eN=eJ.getAttribute('data-core'),eO;if(eN=='ckeditor'){const{ClassicEditor:eS,Alignment:eT,Autosave:eU,Bold:eV,Essentials:eW,Heading:eX,ImageEditing:eY,ImageUtils:eZ,Indent:fA,IndentBlock:_J,Italic:K,List:L,ListProperties:M,Paragraph:N,PlainTableOutput:O,Strikethrough:P,Subscript:Q,Superscript:R,Table:S,TableCaption:T,TableCellProperties:U,TableColumnResize:V,TableLayout:w,TableProperties:x,TableToolbar:y,TodoList:z,Underline:fB}=window.CKEDITOR,eP=eL.$wire.get(eK.expression),eQ=eJ.getAttribute('data-license-key'),eR={toolbar:{items:['undo','redo','|','heading','|','bold','italic','underline','strikethrough','subscript','superscript','|','insertTable','insertTableLayout','|','alignment','|','bulletedList','numberedList','todoList','outdent','indent'],shouldNotGroupWhenFull:!0},plugins:[eT,eU,eV,eW,eX,eY,eZ,fA,_J,K,L,M,N,O,P,Q,R,S,T,U,V,w,x,y,z,fB],heading:{options:[{model:'paragraph',title:'Paragraph',class:'ck-heading_paragraph'},{model:'heading1',view:'h1',title:'Heading 1',class:'ck-heading_heading1'},{model:'heading2',view:'h2',title:'Heading 2',class:'ck-heading_heading2'},{model:'heading3',view:'h3',title:'Heading 3',class:'ck-heading_heading3'},{model:'heading4',view:'h4',title:'Heading 4',class:'ck-heading_heading4'},{model:'heading5',view:'h5',title:'Heading 5',class:'ck-heading_heading5'},{model:'heading6',view:'h6',title:'Heading 6',class:'ck-heading_heading6'}]},initialData:eP,licenseKey:eQ,list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:eJ.getAttribute('placeholder'),table:{contentToolbar:['tableColumn','tableRow','mergeTableCells','tableProperties','tableCellProperties']},autosave:{waitingTiming:5000,save:fC=>eL.$wire.set(eK.expression,fC.getData())}};var eO;eS.create(eJ,eR).then(e=>eO=e).catch(fD=>console.error(fD))}else{var _j=[[{header:[1,2,3,!1]}],['bold','italic'],[{list:'ordered'},{list:'bullet'}]];eO=new window.Quill(eJ, {theme:'snow',modules:{toolbar:_j}});eO.root.innerHTML=eL.$wire.get(eK.expression);window.Livewire?.on('wysiwyg-prop-updated',function(fE){eO.root.innerHTML=fE.value});eO.on('text-change',function(){eL.$wire.set(eK.expression,eO.root.innerHTML)})}window.Livewire?.on('wysiwyg-prop-updated',function(fF){eN=='ckeditor'?eO.setData(fF.value):eO.disable()});eM(()=>{eN?eO.destroy().catch(fG=>console.error(fG)):eO.disable()})});window.Livewire?.directive('date-picker',function({el:fH,directive:fI,component:fJ,cleanup:fK}){var fL=10,fM=fH.querySelector('[data-input-container]');fM.addEventListener('click',function(fN){q(fH.querySelector('[data-oanna-date-picker-calendar]'),fM.getBoundingClientRect(),fL)});fK(()=>{})});function q(fO,fP,fQ){fO.showPopover();var fR=fO.getBoundingClientRect(),fS=fP.top+window.scrollY;fO.style.inset=((fS+fP.height+fQ)+'px')+' auto auto '+(fP.left+'px');var fT=j(fO);fO.style.minWidth=fP.width+'px';fO.style.width='auto';fO.style.position='absolute';fO.style.overflowY='auto';!fT.bottom&&(fO.style.inset=(((fS)-fR.height-fQ)+'px')+' auto auto '+(fP.left+'px'));setTimeout(function(){fO.setAttribute('data-open','')},1)}function r(fU){fU.hidePopover();fU.removeAttribute('data-open')}window.Livewire?.directive('context',function({el:fV,directive:fW,component:fX,cleanup:fY}){var fZ=fV.firstElementChild;fZ.addEventListener('contextmenu',function(gA){if(!fZ.hasAttribute('data-disabled')){var gB=fV.querySelector('[data-oanna-menu]');if(!gB){console.error('No <oanna:menu> found in the <oanna:context> component');return}gA.preventDefault();const[gC,gD]=fV.getAttribute('data-position').split(' ');s(gB,gC,gD,gA)}});fY(()=>{})});function s(gE,gF,gG,gH){gE.showPopover();var gI=gE.getBoundingClientRect(),gJ=gH.pageY;var gK,gL;switch(gF.toLowerCase()) {case 'top':gK=gJ-gI.height;break;case 'bottom':gK=gJ;break}switch(gG.toLowerCase()) {case 'start':gL=gH.pageX;break;case 'center':gL=gH.pageX-(gI.width/2);break;case 'end':gL=gH.pageX-gI.width;break}gE.style.position='absolute';gE.style.overflowY='auto';gE.style.inset=(gK+'px')+' auto auto '+(gL+'px');var gM=j(gE);!gM.top&&(gK=(gJ));!gM.bottom&&(gK=(gJ)-gI.height);!gM.right&&(gL=gH.pageX-gI.width);gE.style.position='absolute';gE.style.overflowY='auto';gE.style.inset=(gK+'px')+' auto auto '+(gL+'px');gE.setAttribute('data-open','')}function t(gN){gN.hidePopover();gN.removeAttribute('data-open')}window.Livewire?.directive('table',function({el:gO,directive:gP,component:gQ,cleanup:gR}){var gS=gQ.$wire.$get('oannaSortBy');for(const gT of gO.querySelectorAll('[data-oanna-table-column]'))if(gT.hasAttribute('data-sortable')){gS===gT.getAttribute('data-sortable')&&u(gT,gQ);gT.addEventListener('click',function(gU){var gV=gQ.$wire.$get('oannaSortBy');gQ.$wire.$set('oannaSortBy',gT.getAttribute('data-sortable'));gV===gT.getAttribute('data-sortable')?gQ.$wire.$call('oannaDirectionToggle'):gQ.$wire.$set('oannaDirection','asc');v(gO);u(gT,gQ)})}gR(()=>{})});function u(gW,gX){gW.setAttribute('data-active','');gW.setAttribute('data-direction',gX.$wire.$get('oannaDirection'))}function v(gY){for(const gZ of gY.querySelectorAll('[data-oanna-table-column]')){gZ.removeAttribute('data-active');gZ.removeAttribute('data-direction')}}document.addEventListener('livewire:initialized',function(hA){document.addEventListener('click',function(hB){for(const hF of document.querySelectorAll('[wire\\:dropdown]')){var hC=hF.querySelector('[data-oanna-menu]');if(hB.target!=hF&&!hF.contains(hB.target))(!hC.hasAttribute('data-oanna-menu-submenu')&&hC.hasAttribute('data-open'))&&i(hC)}for(const hG of document.querySelectorAll('[wire\\:select]')){var hD=hG.querySelector('[data-oanna-select-options]');if(hD.hasAttribute('data-open'))(hB.target!=hD&&!hD.contains(hB.target))&&p(hD)}for(const hH of document.querySelectorAll('[wire\\:date-picker]')){var hE=hH.querySelector('[data-oanna-date-picker-calendar]');if(hE.hasAttribute('data-open'))(hB.target!=hE&&!hE.contains(hB.target))&&r(hE)}document.querySelectorAll('[wire\\:context]').forEach(hI=>{var hJ=hI.querySelector('[data-oanna-menu]');if(hJ.hasAttribute('data-open'))(hB.target!=hJ&&!hJ.contains(hB.target))&&t(hJ)})})});
