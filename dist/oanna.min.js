window.$OANNA=window.$oanna={modal(_){return{name:_,constructor(B){this.name=B},show(){window.Livewire?.first().dispatch('modal-show',{'name':this.name})},close(){window.Livewire?.first().dispatch('modal-close',{'name':this.name})}}},toast(C,_b,_c=null,D='default',E='bottom'){window.Livewire?.first().dispatch('toast-show',{duration:C,slots:{text:_b,heading:_c},dataset:{variant:D,position:E}})}};console.log('oanna init');window.Livewire?.on('modal-show',function(_a){var _B=_a.name,_C=document.querySelector(`dialog[data-modal=${_B}]`);!_C?console.warn(`No modal found for name [${_B}]`):a(_C)});window.Livewire?.on('modal-close',function(_A){var aA=_A.name,aB=document.querySelector(`dialog[data-modal=${aA}]`);if(!aB)console.warn(`No modal found for name [${aA}]`);else aB.hasAttribute('data-open')&&b(aB)});window.Livewire?.directive('modal',function({el:aC,directive:aD,component:aE,cleanup:_d}){aC.addEventListener('click',function(aF){if(aC==aF.target&&aC.contains(aF.target)){var aG=aC.hasAttribute('data-open'),aH=aC.getAttribute('data-dismissible');(aH=='true'&&aG)&&b(aC)}})});function a(aI){aI.showModal();setTimeout(function(){aI.setAttribute('data-open','')},200)}function b(aJ){var aK=getComputedStyle(aJ),aL=parseFloat(aK.transitionDuration);isNaN(aL)?aL=200:aL=aL*1000;aJ.removeAttribute('data-open');setTimeout(function(){aJ.close()},aL)}var c;window.Livewire?.on('toast-show',function(aM){var aN=document.querySelector('[data-oanna-toastr]');if(aN.hasAttribute('data-open')){c&&window.clearTimeout(c);aN.removeAttribute('data-open');var _D=getComputedStyle(aN),aO=(parseFloat(_D.transitionDuration)*1000)??200;setTimeout(function(){f(aN,aM)},(aO/1.5))}else f(aN,aM)});window.Livewire?.on('toast-dismiss',function(){h(document.querySelector('[data-oanna-toastr]'))});var d=document.querySelector('[data-oanna-toastr]');if(d){var A=d.querySelector('[data-toastr-close]');A?.addEventListener('click',function(aP){d.hasAttribute('data-open')&&h(d)})}function f(aQ,aR){var aS=aR.duration??3000,aT=aR.slots,_e=aR.dataset,F=aQ.querySelector('h5.title');if(F&&aT['heading'])F.innerText=aT['heading'];else !aT['heading']&&(F.innerText='');var G=aQ.querySelector('p.text');!aT['heading']?G.classList.add('main'):G.classList.remove('main');(G&&aT['text'])&&(G.innerText=aT['text']);aQ.setAttribute('data-position',_e['position']??'bottom right');aQ.setAttribute('data-variant',_e['variant']??'default');aQ.setAttribute('data-duration',`${aS}`);g(aQ,aS)}function g(aU,aV){aU.showPopover();setTimeout(function(){aU.setAttribute('data-open','')},1);aV>0&&(c=window.setTimeout(function(){h(aU)},aV))}function h(aW){var aX=getComputedStyle(aW);aW.removeAttribute('data-open');c&&window.clearTimeout(c);setTimeout(function(){aW.hidePopover()},(parseFloat(aX.transitionDuration)*1000)??200)}window.Livewire?.directive('dropdown',function({el:aY,directive:aZ,component:bA,cleanup:bB}){var _E=aY.getAttribute('data-position'),[_f,_g]=_E.split(' '),H=10,I=aY.firstElementChild,J=aY.querySelector('[data-oanna-menu]'),K=I.getBoundingClientRect();i(J);var L=J.getBoundingClientRect();j(J);var M,N;if(_f.toLowerCase()=='top'||_f.toLowerCase()=='bottom'){if(_f.toLowerCase()=='top')M=K.top-L.height-H;else _f.toLowerCase()=='bottom'&&(M=K.bottom+H);if(_g.toLowerCase()=='start')N=K.left;else if(_g.toLowerCase()=='center')K.width>L.width?N=((K.width-L.width)/2)+K.left:N=K.left-((L.width-K.width)/2);else _g.toLowerCase()=='end'&&(N=K.right-L.width)}else if(_f.toLowerCase()=='left'||_f.toLowerCase()=='right'){if(_f.toLowerCase()=='left')N=K.left-L.width-H;else _f.toLowerCase()=='right'&&(N=K.right+H);if(_g.toLowerCase()=='start')M=K.top;else if(_g.toLowerCase()=='center')K.height>L.height?M=((K.height-L.height)/2)+K.top:M=K.top-((L.height-K.height)/2);else _g.toLowerCase()=='end'&&(M=K.bottom-L.height)}J.style.position='absolute';J.style.overflowY='auto';J.style.inset=(M+'px')+' auto auto '+(N+'px');I.addEventListener('click',function(bC){J.hasAttribute('data-open')?(aY.removeAttribute('data-active'),j(J)):(aY.setAttribute('data-active',''),i(J))})});window.Livewire?.directive('submenu',function({el:bD,directive:bE,component:bF,cleanup:bG}){var bH=bD.querySelector('[data-oanna-menu]');bD.addEventListener('mouseover',function(bI){bD.setAttribute('data-active','');var bJ=bD.getBoundingClientRect(),bL=bH.getBoundingClientRect().width;bH.style.position='absolute';bH.style.overflowY='auto';bH.style.inset=(bJ.top+'px')+' auto auto '+((bJ.left+bJ.width)+'px');i(bH);var bK=k(bH);j(bH);!bK.right&&(bH.style.inset=(bJ.top+'px')+' auto auto '+((bJ.left-bL)+'px'));i(bH)});bD.addEventListener('mouseout',function(bM){bD.removeAttribute('data-active');j(bH)})});document.addEventListener('click',function(bN){for(const bP of document.querySelectorAll('[data-oanna-dropdown]')){var bO=bP.querySelector('[data-oanna-menu]');if(bN.target==bP||bP.contains(bN.target))continue;if(!bO.hasAttribute('data-oanna-menu-submenu'))bO.hasAttribute('data-open')&&j(bO)}});function i(bQ){bQ.showPopover();bQ.setAttribute('data-open','')}function j(bR){bR.hidePopover();bR.removeAttribute('data-open')}function k(bS){let bT=bS.getBoundingClientRect();let bU=document.documentElement;return{top:bT.top>=0,bottom:bT.bottom<=(window.innerHeight||bU.clientHeight),left:bT.left>=0,right:bT.right<=(window.innerWidth||bU.clientWidth)}}window.Livewire?.directive('tooltip',function({el:bV,directive:bW,component:bX,cleanup:bY}){var bZ=bV.getAttribute('data-position'),_F=10,_i=bV.querySelector('[data-oanna-tooltip-content]');if(!bV.querySelector('[data-oanna-tooltip-content]')){var _G=document.createElement('div');_G.setAttribute('popover','manual');_G.setAttribute('data-oanna-tooltip-content','');_G.setAttribute('wire:ignore.self','');_G.innerText=bV.getAttribute('data-oanna-tooltip');bV.appendChild(_G)}var _h=bV.getBoundingClientRect();l(_i);var _j=_i.getBoundingClientRect();m(_i);var _k,_l;if(bZ=='top'){_k=(_h.top-_j.height)-_F;_l=((_h.width-_j.width)/2)+_h.left;_j.width>_h.width&&(_l=_h.left-((_j.width-_h.width)/2))}else if(bZ=='bottom'){_k=_h.top+_F;_l=((_h.width-_j.width)/2)+_h.left;_j.width>_h.width&&(_l=_h.left-((_j.width-_h.width)/2))}else if(bZ=='left'){_l=(_h.left-_j.width)-_F;_k=((_h.height-_j.height)/2)+_h.top;_j.width>_h.width&&(_k=_h.top-((_j.height-_h.height)/2))}else if(bZ=='right'){_l=_h.left+_F;_k=((_h.height-_j.height)/2)+_h.top;_j.width>_h.width&&(_k=_h.top-((_j.height-_h.height)/2))}_i.style.position='absolute';_i.style.overflowY='auto';_i.style.inset=(_k+'px')+' auto auto '+(_l+'px');bV.addEventListener('mouseover',function(cA){l(bV.querySelector('[data-oanna-tooltip-content]'))});bV.addEventListener('mouseout',function(cB){m(bV.querySelector('[data-oanna-tooltip-content]'))})});function l(cC){cC.showPopover();setTimeout(function(){cC.setAttribute('data-open','')},1)}function m(cD){var cE=getComputedStyle(cD);cD.removeAttribute('data-open');setTimeout(function(){cD.hidePopover()},parseInt(cE.transitionDuration)??200)}window.Livewire?.directive('select',function({el:cF,directive:cG,component:cH,cleanup:cI}){var cJ=cF.querySelector('[data-oanna-select-button]'),cK=cF.querySelector('[data-oanna-select-options]'),cL=cJ.getBoundingClientRect(),_H=10;for(const cM of cK.querySelectorAll('option'))cM.addEventListener('click',function(cN){var cO=window.Livewire?.find(cF.getAttribute('data-livewire-id'));cO.$set(cF.getAttribute('data-target'),cM.getAttribute('value'))});cJ.addEventListener('click',function(cP){console.log(cP);var cQ=cF.querySelector('[data-oanna-select-options]');if(!cQ.hasAttribute('data-open')){cQ.showPopover();var cR=k(cQ),cS=cQ.getBoundingClientRect();cQ.hidePopover();cQ.style.width=cL.width+'px';!cR.bottom?cQ.style.inset=((cL.top-cS.height-_H)+'px')+' auto auto '+(cL.left+'px'):cQ.style.inset=((cL.top+cL.height+_H)+'px')+' auto auto '+(cL.left+'px');n(cQ)}else o(cQ)})});function n(cT){cT.showPopover();cT.setAttribute('data-open','')}function o(cU){cU.hidePopover();cU.removeAttribute('data-open')}window.Livewire?.directive('wysiwyg',function({el:cV,directive:cW,component:cX,cleanup:cY}){var cZ=cV.getAttribute('data-core'),dA;if(cZ=='ckeditor'){const{ClassicEditor:dD,Alignment:dE,Autosave:dF,Bold:dG,Essentials:dH,Heading:dI,ImageEditing:dJ,ImageUtils:dK,Indent:dL,IndentBlock:_J,Italic:_K,List:_L,ListProperties:_m,Paragraph:_n,PlainTableOutput:O,Strikethrough:p,Subscript:q,Superscript:r,Table:s,TableCaption:t,TableCellProperties:u,TableColumnResize:v,TableLayout:w,TableProperties:x,TableToolbar:y,TodoList:z,Underline:dM}=window.CKEDITOR,dB=cX.$wire.get(cW.expression),dC={toolbar:{items:['undo','redo','|','heading','|','bold','italic','underline','strikethrough','subscript','superscript','|','insertTable','insertTableLayout','|','alignment','|','bulletedList','numberedList','todoList','outdent','indent'],shouldNotGroupWhenFull:!0},plugins:[dE,dF,dG,dH,dI,dJ,dK,dL,_J,_K,_L,_m,_n,O,p,q,r,s,t,u,v,w,x,y,z,dM],heading:{options:[{model:'paragraph',title:'Paragraph',class:'ck-heading_paragraph'},{model:'heading1',view:'h1',title:'Heading 1',class:'ck-heading_heading1'},{model:'heading2',view:'h2',title:'Heading 2',class:'ck-heading_heading2'},{model:'heading3',view:'h3',title:'Heading 3',class:'ck-heading_heading3'},{model:'heading4',view:'h4',title:'Heading 4',class:'ck-heading_heading4'},{model:'heading5',view:'h5',title:'Heading 5',class:'ck-heading_heading5'},{model:'heading6',view:'h6',title:'Heading 6',class:'ck-heading_heading6'}]},initialData:dB,licenseKey:'eyJhbGciOiJFUzI1NiJ9.eyJleHAiOjE3NDkxNjc5OTksImp0aSI6ImExYzRmMzExLTA4YWUtNDYwZC1hYTRhLWY2Zjk3MzUzMGJjZCIsInVzYWdlRW5kcG9pbnQiOiJodHRwczovL3Byb3h5LWV2ZW50LmNrZWRpdG9yLmNvbSIsImRpc3RyaWJ1dGlvbkNoYW5uZWwiOlsiY2xvdWQiLCJkcnVwYWwiLCJzaCJdLCJ3aGl0ZUxhYmVsIjp0cnVlLCJsaWNlbnNlVHlwZSI6InRyaWFsIiwiZmVhdHVyZXMiOlsiKiJdLCJ2YyI6IjJiODJlOGJmIn0.9bkPTIhMWFN-4o6W86TzrI8l8R-0KFdUuBhvM3bM9-vBebG4AvybhAvptTQ54nj7lc-aQufNErtkoDvCJqtk3Q',list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:cV.getAttribute('placeholder'),table:{contentToolbar:['tableColumn','tableRow','mergeTableCells','tableProperties','tableCellProperties']},autosave:{waitingTiming:5000,save:dN=>cX.$wire.set(cW.expression,dN.getData())}};var dA;dD.create(cV,dC).then(e=>{console.log('editor loaded');dA=e}).catch(dO=>console.error(dO))}else{var _I=[[{header:[1,2,3,!1]}],['bold','italic'],[{list:'ordered'},{list:'bullet'}]];dA=new window.Quill(cV, {theme:'snow',modules:{toolbar:_I}});dA.root.innerHTML=cX.$wire.get(cW.expression);window.Livewire?.on('wysiwyg-prop-updated',function(dP){dA.root.innerHTML=dP.value});dA.on('text-change',function(){cX.$wire.set(cW.expression,dA.root.innerHTML)})}window.Livewire?.on('wysiwyg-prop-updated',function(dQ){cZ=='ckeditor'?dA.setData(dQ.value):dA.disable()});cY(()=>{cZ?dA.destroy().catch(dR=>console.error(dR)):dA.disable()})});
