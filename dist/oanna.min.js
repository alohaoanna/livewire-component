window.$OANNA=window.$oanna={modal(_){return{name:_,constructor(B){this.name=B},show(){window.Livewire?.first().dispatch('modal-show',{'name':this.name})},close(){window.Livewire?.first().dispatch('modal-close',{'name':this.name})}}},toast(C,_b='default',_c=null,D='bottom right',E=5000){window.Livewire?.first().dispatch('toast-show',{duration:E,slots:{text:C,heading:_c},dataset:{variant:_b,position:D}})}};console.log('oanna init');document.addEventListener('livewire:initialized',function(_a){window.Livewire?.on('modal-show',function(_A){var _B=_A.name,_C=document.querySelector(`dialog[data-modal=${_B}]`);!_C?console.warn(`No modal found for name [${_B}]`):a(_C)});window.Livewire?.on('modal-close',function(aA){var aB=aA.name,aC=document.querySelector(`dialog[data-modal=${aB}]`);if(!aC)console.warn(`No modal found for name [${aB}]`);else aC.hasAttribute('data-open')&&b(aC)})});window.Livewire?.directive('modal',function({el:aD,directive:aE,component:aF,cleanup:_d}){aD.addEventListener('click',function(aG){if(aD==aG.target&&aD.contains(aG.target)){var aH=aD.hasAttribute('data-open'),aI=aD.getAttribute('data-dismissible');(aI=='true'&&aH)&&b(aD)}})});function a(aJ){aJ.showModal();setTimeout(function(){aJ.setAttribute('data-open','')},200)}function b(aK){var aL=getComputedStyle(aK),aM=parseFloat(aL.transitionDuration);isNaN(aM)?aM=200:aM=aM*1000;aK.removeAttribute('data-open');setTimeout(function(){aK.close()},aM)}var c;document.addEventListener('livewire:initialized',function(aN){window.Livewire?.on('toast-show',function(aQ){var aR=document.querySelector('[data-oanna-toastr]');if(aR.hasAttribute('data-open')){c&&window.clearTimeout(c);aR.removeAttribute('data-open');var _D=getComputedStyle(aR),aS=(parseFloat(_D.transitionDuration)*1000)??200;setTimeout(function(){d(aR,aQ)},(aS/1.5))}else d(aR,aQ)});window.Livewire?.on('toast-dismiss',function(){f(document.querySelector('[data-oanna-toastr]'))});var aO=document.querySelector('[data-oanna-toastr]');if(aO){var aP=aO.querySelector('[data-toastr-close]');aP?.addEventListener('click',function(aT){aO.hasAttribute('data-open')&&f(aO)})}});function d(aU,aV){var aW=aV.duration??3000,aX=aV.slots,_e=aV.dataset,F=aU.querySelector('h5.title');if(F&&aX['heading'])F.innerText=aX['heading'];else !aX['heading']&&(F.innerText='');var G=aU.querySelector('p.text');!aX['heading']?G.classList.add('main'):G.classList.remove('main');(G&&aX['text'])&&(G.innerText=aX['text']);aU.setAttribute('data-position',_e['position']??'bottom right');aU.setAttribute('data-variant',_e['variant']??'default');aU.setAttribute('data-duration',`${aW}`);A(aU,aW)}function A(aY,aZ){aY.showPopover();setTimeout(function(){aY.setAttribute('data-open','')},1);aZ>0&&(c=window.setTimeout(function(){f(aY)},aZ))}function f(bA){var bB=getComputedStyle(bA);bA.removeAttribute('data-open');c&&window.clearTimeout(c);setTimeout(function(){bA.hidePopover()},(parseFloat(bB.transitionDuration)*1000)??200)}window.Livewire?.directive('dropdown',function({el:bC,directive:bD,component:bE,cleanup:bF}){var _E=bC.getAttribute('data-position'),[_f,_g]=_E.split(' '),H=10,I=bC.firstElementChild,J=bC.querySelector('[data-oanna-menu]');I.addEventListener('click',function(bG){if(J.hasAttribute('data-open')){bC.removeAttribute('data-active');J.removeAttribute('data-open');J.hidePopover()}else{bC.setAttribute('data-active','');var bH=I.getBoundingClientRect();J.showPopover();J.setAttribute('data-open','');var bI,bJ;switch(_f.toLowerCase()) {case 'top':bI=(bH.top+window.scrollY)-$(J).outerHeight()-H;break;case 'bottom':bI=(bH.top+window.scrollY)+$(I).outerHeight()+H;break}switch(_g.toLowerCase()) {case 'start':bJ=bH.left;break;case 'center':var bK=$(I).outerWidth();var _F=$(J).outerWidth();bJ=bH.left-((_F-bK)/2);break;case 'end':bJ=bH.left-$(J).outerWidth()+$(I).outerWidth();break}J.style.position='absolute';J.style.overflowY='auto';J.style.inset=(bI+'px')+' auto auto '+(bJ+'px')}})});window.Livewire?.directive('submenu',function({el:bL,directive:bM,component:bN,cleanup:bO}){var bP=bL.querySelector('[data-oanna-menu]'),bQ=10;bL.addEventListener('mouseenter',function(bR){bL.setAttribute('data-active','');var bS=bL.getBoundingClientRect();var bT,bU;bP.showPopover();bP.setAttribute('data-open','');bT=(bS.top+window.scrollY);bU=bS.left+$(bL).outerWidth();bP.style.position='absolute';bP.style.overflowY='auto';bP.style.inset=(bT+'px')+' auto auto '+(bU+'px');var bV=g(bP);!bV.right&&(bU=bS.left-$(bP).outerWidth());!bV.bottom&&(bT=window.innerHeight+window.scrollY-bQ-$(bP).outerHeight());bP.style.inset=(bT+'px')+' auto auto '+(bU+'px')});bL.addEventListener('mouseleave',function(bW){bL.removeAttribute('data-active');bP.removeAttribute('data-open');bP.hidePopover()})});function g(bX){let bY=bX.getBoundingClientRect();let bZ=document.documentElement;return{top:bY.top>=0,bottom:bY.bottom<=(window.innerHeight||bZ.clientHeight),left:bY.left>=0,right:bY.right<=(window.innerWidth||bZ.clientWidth)}}window.Livewire?.directive('tooltip',function({el:cA,directive:cB,component:cC,cleanup:cD}){var cE=cA.getAttribute('data-position'),cF=5,_G=cA.firstElementChild;_G.addEventListener('mouseenter',function(cG){var cH=cA.querySelector('[data-oanna-tooltip-content]'),cI=_G.getBoundingClientRect();var cJ,cK;cH.showPopover();cH.setAttribute('data-open','');var cL=$(cH).outerWidth(),cM=$(cH).outerHeight(),_h=$(_G).outerWidth(),_i=$(_G).outerHeight();switch(cE.toLowerCase()) {case 'top':cJ=(cI.top+window.scrollY)-cM-cF;cL>_h?cK=cI.left-((cL-_h)/2):cK=cI.left+((_h-cL)/2);break;case 'bottom':cJ=(cI.top+window.scrollY)+_i+cF;cL>_h?cK=cI.left-((cL-_h)/2):cK=cI.left+((_h-cL)/2);break;case 'left':cK=cI.left-cL-cF;cM>_i?cJ=(cI.top+window.scrollY)-((cM-_i)/2):cJ=(cI.top+window.scrollY)+((_i-cM)/2);break;case 'right':cK=cI.left+_h+cF;cM>_i?cJ=(cI.top+window.scrollY)-((cM-_i)/2):cJ=(cI.top+window.scrollY)+((_i-cM)/2);break}cH.style.position='absolute';cH.style.overflowY='auto';cH.style.inset=(cJ+'px')+' auto auto '+(cK+'px')});_G.addEventListener('mouseleave',function(cN){var cO=cA.querySelector('[data-oanna-tooltip-content]');cO.hidePopover();cO.removeAttribute('data-open')})});window.Livewire?.directive('select',function({el:cP,directive:cQ,component:cR,cleanup:cS}){var cT=10,cU=cP.querySelector('[data-oanna-select-button]');cU.addEventListener('click',function(cW){var cX=cW.target.closest('[data-oanna-select-button]');j(cP.querySelector('[data-oanna-select-options]'),cX.getBoundingClientRect(),cT)});if(cP.hasAttribute('data-oanna-select-searchable')){var _H=cP.querySelector('[data-oanna-select-search-input]');_H.addEventListener('keyup',function(cY){var cZ=cP.querySelector('[data-oanna-select-options]');setTimeout(function(){for(const dA of cZ.querySelectorAll('[data-oanna-select-option]'))!dA.innerText.toLowerCase().includes(_H.value.toLowerCase())?dA.setAttribute('data-hidden',''):dA.removeAttribute('data-hidden');j(cZ,cU.getBoundingClientRect(),cT)},250)})}var cV=cP.querySelector('[data-oanna-select-options]');for(const dB of cV.querySelectorAll('[data-oanna-select-option]'))dB.addEventListener('click',function(dC){var dD=dB.getAttribute('value')??dB.innerText;cP.hasAttribute('data-oanna-select-multiple')?h(cR.$wire,cQ.expression,dD,dB,cU,cV):i(cR.$wire,cQ.expression,dD,dB,cU);k(cV)});cS(()=>{})});function h(dE,dF,dG,dH,dI,dJ){var dK=dE.$get(dF);dK=JSON.parse(JSON.stringify(dK));if(dK.includes(dG)){var dL=dK.indexOf(dG);dK.splice(dL,1)}else dK.push(dG);dE.$set(dF,dK);if(dK.length>1)dI.innerText=dK.length+' '+dI.getAttribute('data-selected-suffix');else if(dK.length==1){var _I=dK.at(0);_I=dJ.querySelector(`[data-oanna-select-option][value="${_I}"]`);dI.innerText=_I.innerText}else dI.innerText=dI.getAttribute('data-placeholder')}function i(dM,dN,dO,dP,dQ){dM.$set(dN,dO);dQ.innerText=dP.innerText}function j(dR,dS,dT){dR.showPopover();var dU=dS.top+window.scrollY,dV=dR.getBoundingClientRect();dR.style.inset=((dU+dS.height+dT)+'px')+' auto auto '+(dS.left+'px');var dW=g(dR);dR.style.width=dS.width+'px';dR.style.position='absolute';dR.style.overflowY='auto';!dW.bottom?dR.style.inset=((dU-dV.height-dT)+'px')+' auto auto '+(dS.left+'px'):dR.style.inset=((dU+dS.height+dT)+'px')+' auto auto '+(dS.left+'px');setTimeout(function(){dR.setAttribute('data-open','')},1)}function k(dX){dX.hidePopover();dX.removeAttribute('data-open')}window.Livewire?.directive('wysiwyg',function({el:dY,directive:dZ,component:eA,cleanup:eB}){var eC=dY.getAttribute('data-core'),eD;if(eC=='ckeditor'){const{ClassicEditor:eH,Alignment:eI,Autosave:eJ,Bold:eK,Essentials:eL,Heading:eM,ImageEditing:eN,ImageUtils:eO,Indent:eP,IndentBlock:_J,Italic:K,List:L,ListProperties:M,Paragraph:N,PlainTableOutput:O,Strikethrough:p,Subscript:q,Superscript:r,Table:s,TableCaption:t,TableCellProperties:u,TableColumnResize:v,TableLayout:w,TableProperties:x,TableToolbar:y,TodoList:z,Underline:eQ}=window.CKEDITOR,eE=eA.$wire.get(dZ.expression),eF=dY.getAttribute('data-license-key'),eG={toolbar:{items:['undo','redo','|','heading','|','bold','italic','underline','strikethrough','subscript','superscript','|','insertTable','insertTableLayout','|','alignment','|','bulletedList','numberedList','todoList','outdent','indent'],shouldNotGroupWhenFull:!0},plugins:[eI,eJ,eK,eL,eM,eN,eO,eP,_J,K,L,M,N,O,p,q,r,s,t,u,v,w,x,y,z,eQ],heading:{options:[{model:'paragraph',title:'Paragraph',class:'ck-heading_paragraph'},{model:'heading1',view:'h1',title:'Heading 1',class:'ck-heading_heading1'},{model:'heading2',view:'h2',title:'Heading 2',class:'ck-heading_heading2'},{model:'heading3',view:'h3',title:'Heading 3',class:'ck-heading_heading3'},{model:'heading4',view:'h4',title:'Heading 4',class:'ck-heading_heading4'},{model:'heading5',view:'h5',title:'Heading 5',class:'ck-heading_heading5'},{model:'heading6',view:'h6',title:'Heading 6',class:'ck-heading_heading6'}]},initialData:eE,licenseKey:eF,list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:dY.getAttribute('placeholder'),table:{contentToolbar:['tableColumn','tableRow','mergeTableCells','tableProperties','tableCellProperties']},autosave:{waitingTiming:5000,save:eR=>eA.$wire.set(dZ.expression,eR.getData())}};var eD;eH.create(dY,eG).then(e=>eD=e).catch(eS=>console.error(eS))}else{var _j=[[{header:[1,2,3,!1]}],['bold','italic'],[{list:'ordered'},{list:'bullet'}]];eD=new window.Quill(dY, {theme:'snow',modules:{toolbar:_j}});eD.root.innerHTML=eA.$wire.get(dZ.expression);window.Livewire?.on('wysiwyg-prop-updated',function(eT){eD.root.innerHTML=eT.value});eD.on('text-change',function(){eA.$wire.set(dZ.expression,eD.root.innerHTML)})}window.Livewire?.on('wysiwyg-prop-updated',function(eU){eC=='ckeditor'?eD.setData(eU.value):eD.disable()});eB(()=>{eC?eD.destroy().catch(eV=>console.error(eV)):eD.disable()})});window.Livewire?.directive('date-picker',function({el:eW,directive:eX,component:eY,cleanup:eZ}){var fA=10,fB=eW.querySelector('[data-input-container]');fB.addEventListener('click',function(fC){l(eW.querySelector('[data-oanna-date-picker-calendar]'),fB.getBoundingClientRect(),fA)});eZ(()=>{})});window.Livewire?.directive('avatar',function({el:fD,directive:fE,component:fF,cleanup:fG}){for(const fH of fE.modifiers)switch(fH.toLowerCase()) {case 'badge':fD.style.borderColor=document.body.style.backgroundColor;console.log(fD.style.borderColor);break}});function l(fI,fJ,fK){fI.showPopover();var fL=fI.getBoundingClientRect(),fM=fJ.top+window.scrollY;fI.style.inset=((fM+fJ.height+fK)+'px')+' auto auto '+(fJ.left+'px');var fN=g(fI);fI.style.minWidth=fJ.width+'px';fI.style.width='auto';fI.style.position='absolute';fI.style.overflowY='auto';!fN.bottom&&(fI.style.inset=(((fM)-fL.height-fK)+'px')+' auto auto '+(fJ.left+'px'));setTimeout(function(){fI.setAttribute('data-open','')},1)}function m(fO){fO.hidePopover();fO.removeAttribute('data-open')}window.Livewire?.directive('context',function({el:fP,directive:fQ,component:fR,cleanup:fS}){var fT;fQ.modifiers.includes('self')?(fT=fP,fP.setAttribute('wire:ignore.self',''),fP.setAttribute('data-oanna-context',''),fP.setAttribute('data-position',fQ.expression)):(fT=fP.firstElementChild);fT.addEventListener('contextmenu',function(fU){if(!fT.hasAttribute('data-disabled')){var fZ=fP.querySelector('[data-oanna-menu]'),fV=fZ.getBoundingClientRect(),gA=fU.pageY;if(!fZ){console.error('No <oanna:menu> found in the <oanna:context> component');return}fU.preventDefault();const[gB,gC]=fP.getAttribute('data-position').split(' ');fZ.showPopover();fZ.setAttribute('data-open','');var fW,fX;switch(gB.toLowerCase()) {case 'top':fW=gA-fV.height;break;case 'bottom':fW=gA;break}switch(gC.toLowerCase()) {case 'start':fX=fU.pageX;break;case 'center':fX=fU.pageX-(fV.width/2);break;case 'end':fX=fU.pageX-fV.width;break}fZ.style.position='absolute';fZ.style.overflowY='auto';fZ.style.inset=(fW+'px')+' auto auto '+(fX+'px');var fY=g(fZ);!fY.top&&(fW=(gA));!fY.bottom&&(fW=(gA)-fV.height);!fY.right&&(fX=fU.pageX-fV.width);fZ.style.position='absolute';fZ.style.overflowY='auto';fZ.style.inset=(fW+'px')+' auto auto '+(fX+'px')}});fS(()=>{})});window.Livewire?.directive('table',function({el:gD,directive:gE,component:gF,cleanup:gG}){var gH=gF.$wire.$get('oannaSortBy');for(const gI of gD.querySelectorAll('[data-oanna-table-column]'))if(gI.hasAttribute('data-sortable')){gH===gI.getAttribute('data-sortable')&&n(gI,gF);gI.addEventListener('click',function(gJ){var gK=gF.$wire.$get('oannaSortBy');gF.$wire.$set('oannaSortBy',gI.getAttribute('data-sortable'));gK===gI.getAttribute('data-sortable')?gF.$wire.$call('oannaDirectionToggle'):gF.$wire.$set('oannaDirection','asc');o(gD);n(gI,gF)})}gG(()=>{})});function n(gL,gM){gL.setAttribute('data-active','');gL.setAttribute('data-direction',gM.$wire.$get('oannaDirection'))}function o(gN){for(const gO of gN.querySelectorAll('[data-oanna-table-column]')){gO.removeAttribute('data-active');gO.removeAttribute('data-direction')}}document.addEventListener('livewire:initialized',function(gP){document.addEventListener('click',function(gQ){for(const gU of document.querySelectorAll('[wire\\:dropdown]')){var gR=gU.querySelector('[data-oanna-menu]');if(gQ.target!=gU&&!gU.contains(gQ.target))(!gR.hasAttribute('data-oanna-menu-submenu')&&gR.hasAttribute('data-open'))&&(gR.hidePopover(),gR.removeAttribute('data-open'))}for(const gV of document.querySelectorAll('[wire\\:select]')){var gS=gV.querySelector('[data-oanna-select-options]');if(gS.hasAttribute('data-open'))(gQ.target!=gS&&!gS.contains(gQ.target))&&k(gS)}for(const gW of document.querySelectorAll('[wire\\:date-picker]')){var gT=gW.querySelector('[data-oanna-date-picker-calendar]');if(gT.hasAttribute('data-open'))(gQ.target!=gT&&!gT.contains(gQ.target))&&m(gT)}document.querySelectorAll('[wire\\:context], [wire\\:context\\.self]').forEach(gX=>{var gY=gX.querySelector('[data-oanna-menu]');if(gY.hasAttribute('data-open'))(gQ.target!=gY&&!gY.contains(gQ.target))&&(gY.hidePopover(),gY.removeAttribute('data-open'))})})});
